---
output:
  #bookdown::html_document2: default
  #bookdown::word_document2: default
  bookdown::pdf_document2:
    template: templates/brief_template.tex
documentclass: book
bibliography: references.bib
---

# Methods {#methods}


## Data Cleaning and Transformatoin {#datacleaning}
To examine our data set properly, we first had to restructure and reformat it. This initial data cleaning step included type conversions, value mutation, addition of new calculated fields and the dropping of irrelevant columns.
Concretely, we converted name, category and designer to categorical variables. In the designer column, we converted blank strings and values prefixed by “IKEA of Sweden” to missing values (```NA```). Furthermore, we converted both the price and old price to double values and changed the currency from Saudi Arabian Riyals to Euros based on the exchange rate from the time the data set was obtained by the author \@ref(#theoretical_background). To better facilitate the comparison of the different sizes of furniture items, we calcuted the size in cubic meters based on the depth, width and height values. 
Finally, we selected only columns that could have a potential impact in our analysis (see Table \@ref(tab:initial-ikea) and \@ref(tab:tidy-ikea)).

TODO: Format these tables
```{r initial-ikea, echo=FALSE}
library('kableExtra')

knitr::kable(head(ikea), caption = "Initial Data Set formatting.")
```

```{r tidy-ikea, echo=FALSE}
knitr::kable(head(tidy_ikea), caption = "Data Set after cleaning process.")
```



## 8 Step EDA (nice heading) {#tbd}
[@Zuur2010, pp. 33-35].
- Our EDA analysis is based on the protocol for data exploration proposed by ZUUR paper
- This 8 step analysis is especially useful for regression models


### Step 1: Outliers in Price and Independent Variables
- Assumption: outliers are not by chance or random (no observer error)
- Assumption seems to hold up when looking at individual outlier observations. These are congruent in themselves. Assume: web scraping technique is highly unlikely to have measurement error ocurrence
- Use outliers in model

### Step 2: Homogeneity of Price
- To test the assumption of  homogeneity of variance for price (homoscedasticity) by the means of conditional boxplotting
- As can be seen, price is homogoneous for all category  variable except for beds where the variance differes widely (see plot xxx)
- price is heterogenous for all individual names by category (see plot xxx)
- Looking at both categories simultaneously -> homogenous
- Im Rahmen der Arbeit nicht möglich alle kategorischen Variablen Kombinationen anzuschauen. 5 kategorische Variablen -> 2^5 = 32 Möglichkeiten


### Step 3: Normality of Price
### Step 4: Zero Trouble of Price
### Step 5: Collinearity between Independent Variables
### Step 6: Relationship between Independent Variables and Price
### Step 7: Interactions
### Step 8: Independence of Price


## Random Forest Regression Model {#tbd2}